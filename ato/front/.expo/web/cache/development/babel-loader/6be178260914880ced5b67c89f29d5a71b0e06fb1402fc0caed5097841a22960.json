{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { NativeWindStyleSheet as _NativeWindStyleSheet } from \"nativewind\";\nimport React, { useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Picker from \"react-native-web/dist/exports/Picker\";\nimport axios from 'axios';\nimport * as ImagePicker from \"expo-image-picker\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar AddAnimalForm = function AddAnimalForm(_ref) {\n  var _ref2, _ref3;\n  var dispatch = _ref.dispatch,\n    onClose = _ref.onClose,\n    navigation = _ref.navigation;\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    nom = _useState2[0],\n    setNom = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    type = _useState4[0],\n    setType = _useState4[1];\n  var _useState5 = useState(''),\n    _useState6 = _slicedToArray(_useState5, 2),\n    couleur = _useState6[0],\n    setCouleur = _useState6[1];\n  var _useState7 = useState(''),\n    _useState8 = _slicedToArray(_useState7, 2),\n    age = _useState8[0],\n    setAge = _useState8[1];\n  var _useState9 = useState('Male'),\n    _useState10 = _slicedToArray(_useState9, 2),\n    sexe = _useState10[0],\n    setSexe = _useState10[1];\n  var _useState11 = useState(null),\n    _useState12 = _slicedToArray(_useState11, 2),\n    image = _useState12[0],\n    setImage = _useState12[1];\n  var _useState13 = useState(''),\n    _useState14 = _slicedToArray(_useState13, 2),\n    description = _useState14[0],\n    setDescription = _useState14[1];\n  var pickImage = function pickImage() {\n    return (_ref2 = _ref2 || _asyncToGenerator(function* () {\n      var result = yield ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.All,\n        allowsEditing: false,\n        aspect: [4, 3],\n        quality: 1,\n        base64: false\n      });\n      if (!result.cancelled) {\n        setImage(result.assets[0].uri);\n      }\n    })).apply(this, arguments);\n  };\n  var handleSubmit = function handleSubmit() {\n    return (_ref3 = _ref3 || _asyncToGenerator(function* () {\n      try {\n        var formData = new FormData();\n        formData.append('nom', nom);\n        formData.append('type', type);\n        formData.append('couleur', couleur);\n        formData.append('age', age);\n        formData.append('sexe', sexe);\n        formData.append('description', description);\n        if (image) {\n          var response = yield fetch(image);\n          var blob = yield response.blob();\n          formData.append(\"photo\", blob, \"photo.jpg\");\n        }\n        axios.post('http://localhost:3000/crud/new', formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        });\n        setNom('');\n        setType('');\n        setCouleur('');\n        setAge('');\n        setSexe('');\n        setDescription('');\n        setImage(null);\n        navigation.navigate('Accueil');\n      } catch (error) {\n        console.error('Error while submitting:', error);\n      }\n    })).apply(this, arguments);\n  };\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(TouchableOpacity, {\n      style: styles.imageButton,\n      onPress: pickImage,\n      children: _jsx(Text, {\n        style: styles.imageButtonText,\n        children: \"S\\xE9lectionner une photo\"\n      })\n    }), image && _jsx(Image, {\n      source: {\n        uri: image\n      },\n      style: styles.imagePreview\n    }), _jsx(TextInput, {\n      style: styles.input,\n      placeholder: \"Nom\",\n      value: nom,\n      onChangeText: setNom\n    }), _jsx(TextInput, {\n      style: styles.input,\n      placeholder: \"Type\",\n      value: type,\n      onChangeText: setType\n    }), _jsx(TextInput, {\n      style: styles.input,\n      placeholder: \"Couleur\",\n      value: couleur,\n      onChangeText: setCouleur\n    }), _jsx(TextInput, {\n      style: styles.input,\n      placeholder: \"Age\",\n      value: age,\n      onChangeText: setAge\n    }), _jsx(TextInput, {\n      style: styles.input,\n      placeholder: \"Sexe\",\n      value: sexe,\n      onChangeText: setSexe\n    }), _jsx(TextInput, {\n      style: styles.input,\n      placeholder: \"Description\",\n      value: description,\n      onChangeText: setDescription\n    }), _jsx(TouchableOpacity, {\n      style: styles.editButton,\n      onPress: handleSubmit,\n      children: _jsx(Text, {\n        children: \"Ajouter\"\n      })\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    backgroundColor: 'white',\n    padding: 20,\n    borderRadius: 10\n  },\n  input: {\n    borderWidth: 1,\n    borderColor: 'gray',\n    borderRadius: 5,\n    padding: 10,\n    marginBottom: 10,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  editButton: {\n    backgroundColor: 'orange',\n    borderRadius: 5,\n    padding: 5,\n    alignItems: 'center',\n    justifyContent: 'center'\n  }\n});\nexport default AddAnimalForm;\n_NativeWindStyleSheet.create({\n  styles: {\n    \"container\": {\n      \"width\": \"100%\"\n    },\n    \"container@0\": {\n      \"maxWidth\": 640\n    },\n    \"container@1\": {\n      \"maxWidth\": 768\n    },\n    \"container@2\": {\n      \"maxWidth\": 1024\n    },\n    \"container@3\": {\n      \"maxWidth\": 1280\n    },\n    \"container@4\": {\n      \"maxWidth\": 1536\n    }\n  },\n  atRules: {\n    \"container\": [[[\"media\", \"(min-width: 640px)\"]], [[\"media\", \"(min-width: 768px)\"]], [[\"media\", \"(min-width: 1024px)\"]], [[\"media\", \"(min-width: 1280px)\"]], [[\"media\", \"(min-width: 1536px)\"]]]\n  },\n  topics: {\n    \"container\": [\"width\"]\n  }\n});","map":{"version":3,"names":["React","useState","View","TextInput","Button","StyleSheet","TouchableOpacity","Text","Image","Picker","axios","ImagePicker","jsx","_jsx","jsxs","_jsxs","AddAnimalForm","_ref","_ref2","_ref3","dispatch","onClose","navigation","_useState","_useState2","_slicedToArray","nom","setNom","_useState3","_useState4","type","setType","_useState5","_useState6","couleur","setCouleur","_useState7","_useState8","age","setAge","_useState9","_useState10","sexe","setSexe","_useState11","_useState12","image","setImage","_useState13","_useState14","description","setDescription","pickImage","_asyncToGenerator","result","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","All","allowsEditing","aspect","quality","base64","cancelled","assets","uri","apply","arguments","handleSubmit","formData","FormData","append","response","fetch","blob","post","headers","navigate","error","console","style","styles","container","children","imageButton","onPress","imageButtonText","source","imagePreview","input","placeholder","value","onChangeText","editButton","create","backgroundColor","padding","borderRadius","borderWidth","borderColor","marginBottom","alignItems","justifyContent","_NativeWindStyleSheet","atRules","topics"],"sources":["C:/Users/Fabiola/Documents/react-native/react-native/ato/front/components/Crud/Components/AddAnimalForm.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { View, TextInput, Button, StyleSheet, TouchableOpacity, Text, Image,Picker  } from 'react-native';\r\nimport axios from 'axios';\r\nimport * as ImagePicker from \"expo-image-picker\";\r\n\r\nconst AddAnimalForm = ({ dispatch, onClose, navigation }) => {\r\n  const [nom, setNom] = useState('');\r\n  const [type, setType] = useState('');\r\n  const [couleur, setCouleur] = useState('');\r\n  const [age, setAge] = useState('');\r\n  const [sexe, setSexe] = useState('Male');\r\n  const [image, setImage] = useState(null); \r\n  const [description, setDescription] = useState('');\r\n\r\n\r\n  const pickImage = async () => {\r\n    let result = await ImagePicker.launchImageLibraryAsync({\r\n      mediaTypes: ImagePicker.MediaTypeOptions.All,\r\n      allowsEditing: false,\r\n      aspect: [4, 3],\r\n      quality: 1,\r\n      base64: false,\r\n    });\r\n\r\n    if (!result.cancelled) {\r\n      setImage(result.assets[0].uri);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('nom', nom);\r\n      formData.append('type', type);\r\n      formData.append('couleur', couleur);\r\n      formData.append('age', age);\r\n      formData.append('sexe', sexe);\r\n      formData.append('description', description);\r\n      if(image){\r\n        const response = await fetch(image);\r\n        const blob = await response.blob();\r\n        formData.append(\"photo\", blob, \"photo.jpg\");\r\n      }\r\n\r\n      axios.post('http://localhost:3000/crud/new', formData, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n        },\r\n      });\r\n\r\n      setNom('');\r\n      setType('');\r\n      setCouleur('');\r\n      setAge('');\r\n      setSexe('');\r\n      setDescription('');\r\n      setImage(null);\r\n      \r\n      navigation.navigate('Accueil');\r\n\r\n    } catch (error) {\r\n      console.error('Error while submitting:', error);\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <View style={styles.container}>\r\n      <TouchableOpacity\r\n        style={styles.imageButton}\r\n        onPress={pickImage}\r\n      >\r\n        <Text style={styles.imageButtonText}>SÃ©lectionner une photo</Text>\r\n      </TouchableOpacity>\r\n      {image && (\r\n        <Image\r\n          source={{ uri: image }}\r\n          style={styles.imagePreview}\r\n        />\r\n      )}\r\n      <TextInput style={styles.input} placeholder=\"Nom\" value={nom} onChangeText={setNom} />\r\n      <TextInput style={styles.input} placeholder=\"Type\" value={type} onChangeText={setType} />\r\n      <TextInput style={styles.input} placeholder=\"Couleur\" value={couleur} onChangeText={setCouleur} />\r\n      <TextInput style={styles.input} placeholder=\"Age\" value={age} onChangeText={setAge} />\r\n      <TextInput style={styles.input} placeholder=\"Sexe\" value={sexe} onChangeText={setSexe} />\r\n      <TextInput style={styles.input} placeholder=\"Description\" value={description} onChangeText={setDescription} />\r\n\r\n\r\n      <TouchableOpacity style={styles.editButton} onPress={handleSubmit}>\r\n        <Text>Ajouter</Text>\r\n      </TouchableOpacity>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    backgroundColor: 'white',\r\n    padding: 20,\r\n    borderRadius: 10,\r\n  },\r\n  input: {\r\n    borderWidth: 1,\r\n    borderColor: 'gray',\r\n    borderRadius: 5,\r\n    padding: 10,\r\n    marginBottom: 10,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  editButton: {\r\n    backgroundColor: 'orange',\r\n    borderRadius: 5,\r\n    padding: 5,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n});\r\n\r\nexport default AddAnimalForm;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}